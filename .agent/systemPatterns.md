## System Patterns

- Next.js App Router with server actions and API routes.
- Prisma ORM with SQLite for local dev.
- Stripe Checkout for subscriptions and one-time payments.
- Webhooks drive subscription state and token resets at renewal.
- Functional core, imperative shell: pure token math in utilities, IO in API routes.


